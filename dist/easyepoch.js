var EasyEpoch;(()=>{"use strict";var e={380(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={get createMonthTracker(){return l},get days(){return s},get formatTimeFromInputElement(){return m},get getDisplayDate(){return f},get monthTracker(){return i},get months(){return o},get scrapeMonth(){return h},get scrapeNextMonth(){return u},get scrapePreviousMonth(){return d}};for(var a in n)Object.defineProperty(t,a,{enumerable:!0,get:Object.getOwnPropertyDescriptor(n,a).get});function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var i={years:{}},o=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function c(e,t){e=[].concat(e);for(var n=0;n<t;n++)e[n]=void 0;return e}function l(){return{years:{}}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=new Date(e.getTime()),a=e.getFullYear(),r=e.getMonth(),o={date:n,month:void 0};if(t.current=new Date(e.getTime()),t.current.setDate(1),t.years[a]=t.years[a]||{},void 0!==t.years[a][r])return o.month=t.years[a][r],o;(e=new Date(e.getTime())).setDate(1),t.years[a][r]=[];for(var s=t.years[a][r],l=0;e.getMonth()===r;){var h=e.getDate(),d=e.getDay();1===h&&(s[l]=c([],d)),s[l]=s[l]||[],s[l][d]=h,6===d&&l++,e.setDate(e.getDate()+1)}var u=5;void 0===s[5]&&(u=4,s[5]=c([],7)),void 0===s[4]&&(u=3,s[4]=c([],7));var p=s[u].length;if(p<7){var y=s[u].concat(c([],7-p));s[u]=y}return o.month=s,o}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=e.current;if(!t)throw Error("scrapePreviousMonth called without setting monthTracker.current!");return t.setMonth(t.getMonth()-1),h(t,e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=e.current;if(!t)throw Error("scrapeNextMonth called without setting monthTracker.current!");return t.setMonth(t.getMonth()+1),h(t,e)}var p=[1,21,31],y=[2,22],v=[3,23];function f(e){var t=e.getDate();return -1!==p.indexOf(t)?t+"st":-1!==y.indexOf(t)?t+"nd":-1!==v.indexOf(t)?t+"rd":t+"th"}function m(e){var t,n="",a=(t=e.split(":"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,a,r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),2!==i.length);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return r(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],o=a[1],s=(i*=1)>=12;return s&&i>12&&(i-=12),s||0!==i||(i=12),n+=i<10?"0"+i:i,n+=":"+o+" ",n+=s?"PM":"AM"}},431(e,t,n){var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(void 0);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}(n(380)),r=n(437);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,a,r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=["submit","close"];e.exports=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");o(this,"selectedDate",void 0),o(this,"$easyEpoch",void 0),o(this,"readableDate",void 0),o(this,"_eventHandlers",void 0),o(this,"_validOnListeners",l),o(this,"opts",void 0),o(this,"$",void 0),o(this,"$$",void 0),o(this,"$easyepoch",void 0),o(this,"$easyepochWrapper",void 0),o(this,"$trs",void 0),o(this,"$tds",void 0),o(this,"$headerMonthAndYear",void 0),o(this,"$monthAndYear",void 0),o(this,"$date",void 0),o(this,"$day",void 0),o(this,"$time",void 0),o(this,"$timeInput",void 0),o(this,"$timeSectionIcon",void 0),o(this,"$cancel",void 0),o(this,"$ok",void 0),o(this,"$displayDateElements",void 0),o(this,"monthTracker",void 0);var r,i=void 0,s=n;if("string"==typeof e){var c=document.querySelector(e);if(null!==c)i=c;else throw Error("Invalid selector passed to EasyEpoch!")}else(null!=(r=HTMLElement)&&"u">typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)?i=e:(void 0===e?"undefined":e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&(s=e);i||(i=document.querySelector("body")),s||(s={}),this.selectedDate=new Date,this.monthTracker=a.createMonthTracker(),this.injectTemplate(i),this.init(i,s),this.initListeners(),this._eventHandlers={}}return e=[{key:"initElMethod",value:function(e){this.$=function(t){return e.querySelector(t)},this.$$=function(t){return e.querySelectorAll(t)}}},{key:"init",value:function(e,t){this.$easyepochWrapper=e.querySelector(".easyepoch-wrapper"),this.initElMethod(this.$easyepochWrapper);var n=this.$,r=this.$$;this.$easyepoch=n(".easyepoch-date-picker"),this.$trs=r(".easyepoch-calender tbody tr"),this.$tds=r(".easyepoch-calender tbody td"),this.$headerMonthAndYear=n(".easyepoch-month-and-year"),this.$monthAndYear=n(".easyepoch-selected-date"),this.$date=n(".easyepoch-date"),this.$day=n(".easyepoch-day-header"),this.$time=n(".easyepoch-time"),this.$timeInput=n(".easyepoch-time-section input"),this.$timeSectionIcon=n(".easyepoch-icon-time"),this.$cancel=n(".easyepoch-cancel-btn"),this.$ok=n(".easyepoch-ok-btn"),this.$displayDateElements=[this.$day,this.$headerMonthAndYear,this.$date],this.$time.classList.add("easyepoch-fade");var i=new Date;this.render(a.scrapeMonth(i,this.monthTracker)),t=t||{},this.opts=t,this.reset(t.selectedDate||i),void 0!==t.zIndex&&(this.$easyepochWrapper.style.zIndex=t.zIndex.toString()),t.disableTimeSection&&this.disableTimeSection(),t.compactMode&&this.compactMode()}},{key:"reset",value:function(e){var t=e||new Date;this.render(a.scrapeMonth(t,this.monthTracker));var n=t.toTimeString().split(" ")[0].replace(/\:\d\d$/,"");this.$timeInput.value=n,this.$time.innerText=a.formatTimeFromInputElement(n);var r=t.getDate().toString(),i=this.findElementWithDate(r);i&&!i.classList.contains("active")&&(this.selectDateElement(i),this.updateDateComponents(t))}},{key:"compactMode",value:function(){this.$date.style.display="none"}},{key:"disableTimeSection",value:function(){this.$timeSectionIcon.style.visibility="hidden"}},{key:"enableTimeSection",value:function(){this.$timeSectionIcon.style.visibility="visible"}},{key:"injectTemplate",value:function(e){var t=document.createElement("template");t.innerHTML=r.htmlTemplate,e.appendChild(t.content.cloneNode(!0))}},{key:"clearRows",value:function(){this.$tds.forEach(function(e){e.innerHTML="",e.classList.remove("active")})}},{key:"updateDateComponents",value:function(e){var t=a.days[e.getDay()],n=a.months[e.getMonth()]+" "+e.getFullYear();this.$headerMonthAndYear.innerHTML=n,this.$monthAndYear.innerHTML=n,this.$day.innerHTML=t,this.$date.innerHTML=a.getDisplayDate(e)}},{key:"render",value:function(e){var t=this.$$,n=this.$trs,a=e.month,r=e.date;this.clearRows(),a.forEach(function(e,t){var a=n[t].children;e.forEach(function(e,t){var n=a[t];e?(n.removeAttribute("data-empty"),n.innerHTML=e):n.setAttribute("data-empty","")})});var i=t("table tbody tr:last-child td"),o=!0;i.forEach(function(e){void 0===e.dataset.empty&&(o=!1)});var s=i[0].parentElement;o&&s?s.style.display="none":s.style.display="table-row",this.updateDateComponents(r)}},{key:"updateSelectedDate",value:function(e){var t,n=this.$monthAndYear,r=this.$time;this.$date,t=e?e.innerHTML.trim():this.$date.innerHTML.replace(/[a-z]+/,"");var i=c(n.innerHTML.split(" "),2),o=i[0],s=i[1],l=a.months.indexOf(o),h=r.innerHTML.split(":"),d=+h[0],u=c(h[1].split(" "),2),p=u[0],y=u[1];"AM"===y&&12==d&&(d=0),"PM"===y&&d<12&&(d+=12);var v=new Date(+s,+l,+t,+d,+p);this.selectedDate=v;var f=t+" ";f+=n.innerHTML.trim()+" ",f+=r.innerHTML.trim(),this.readableDate=f.replace(/^\d+/,a.getDisplayDate(v))}},{key:"selectDateElement",value:function(e){var t=this.$(".easyepoch-calender tbody .active");e.classList.add("active"),t&&t.classList.remove("active"),this.updateSelectedDate(e),this.updateDateComponents(this.selectedDate)}},{key:"findElementWithDate",value:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.$tds.forEach(function(a){var r=a.innerHTML.trim();r===e&&(t=a),""!==r&&(n=a)}),void 0===t&&a&&(t=n),t}},{key:"handleIconButtonClick",value:function(e){var t,n=this.$,r="easyepoch-icon-",i=r+"calender",o=r+"time";if(e.classList.contains(i)){var s=n("."+o),c=n(".easyepoch-time-section");n(".easyepoch-calender-section").style.display="block",c.style.display="none",s.classList.remove("active"),e.classList.add("active"),this.toggleDisplayFade();return}if(e.classList.contains(o)){var l=n("."+i),h=n(".easyepoch-calender-section");n(".easyepoch-time-section").style.display="block",h.style.display="none",l.classList.remove("active"),e.classList.add("active"),this.toggleDisplayFade();return}var d=n(".easyepoch-calender td.active");if(d&&(t=d.innerHTML.trim()),e.classList.contains(r+"next")&&this.render(a.scrapeNextMonth(this.monthTracker)),e.classList.contains(r+"previous")&&this.render(a.scrapePreviousMonth(this.monthTracker)),t){var u=this.findElementWithDate(t,!0);this.selectDateElement(u)}}},{key:"initListeners",value:function(){var e=this.$easyepoch,t=this.$timeInput,n=this.$ok,r=this.$cancel,i=this.$easyepochWrapper,o=this;function s(){o.close(),o.callEvent("close",function(e){e()})}e.addEventListener("click",function(e){var t=e.target,n=t.tagName.toLowerCase();(e.stopPropagation(),"td"===n&&void 0===t.dataset.empty)?o.selectDateElement(t):"button"===n&&t.classList.contains("easyepoch-icon")&&o.handleIconButtonClick(t)}),t.addEventListener("input",function(e){if(""!==e.target.value){var t=a.formatTimeFromInputElement(e.target.value);o.$time.innerHTML=t,o.updateSelectedDate()}}),n.addEventListener("click",function(){o.close(),o.callEvent("submit",function(e){e(o.selectedDate,o.readableDate)})}),r.addEventListener("click",s),i.addEventListener("click",s)}},{key:"callEvent",value:function(e,t){(this._eventHandlers[e]||[]).forEach(function(e){t(e)})}},{key:"open",value:function(){this.$easyepochWrapper.classList.add("active")}},{key:"close",value:function(){this.$easyepochWrapper.classList.remove("active")}},{key:"on",value:function(e,t){var n=this._validOnListeners,a=this._eventHandlers;if(!n.includes(e))throw Error("Not a valid event!");a[e]=a[e]||[],a[e].push(t)}},{key:"toggleDisplayFade",value:function(){this.$time.classList.toggle("easyepoch-fade"),this.$displayDateElements.forEach(function(e){e.classList.toggle("easyepoch-fade")})}}],function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,e),t}()},437(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"htmlTemplate",{enumerable:!0,get:function(){return n}});var n='\n<div class="easyepoch-wrapper">\n  <div class="easyepoch-date-picker">\n    <div class="easyepoch-day-header"></div>\n      <div class="easyepoch-date-section">\n        <div class="easyepoch-month-and-year"></div>\n        <div class="easyepoch-date"></div>\n        <div class="easyepoch-select-pane">\n          <button type="button" class="easyepoch-icon easyepoch-icon-calender active" title="Select date from calender!"></button>\n          <div class="easyepoch-time">12:00 PM</div>\n          <button type="button" class="easyepoch-icon easyepoch-icon-time" title="Select time"></button>\n        </div>\n      </div>\n      <div class="easyepoch-picker-section">\n        <div class="easyepoch-calender-section">\n          <div class="easyepoch-month-switcher easyepoch-select-pane">\n            <button type="button" class="easyepoch-icon easyepoch-icon-previous"></button>\n            <div class="easyepoch-selected-date"></div>\n            <button type="button" class="easyepoch-icon easyepoch-icon-next"></button>\n          </div>\n          <div class="easyepoch-calender">\n            <table>\n              <thead>\n                <tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>\n              </thead>\n              <tbody>\n                '.concat(function(e,t){for(var n="",a=1;a<=6;a++)n+=e;return n}("<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>",0),'\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div class="easyepoch-time-section">\n          <input type="time" value="12:00" autofocus="false">\n        </div>\n      </div>\n      <div class="easyepoch-bottom-part">\n        <button type="button" class="easyepoch-cancel-btn easyepoch-btn" title="Cancel">Cancel</button>\n        <button type="button" class="easyepoch-ok-btn easyepoch-btn" title="OK">OK</button>\n      </div>\n  </div>\n</div>\n')}},t={};EasyEpoch=function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}(431)})();
//# sourceMappingURL=easyepoch.js.map